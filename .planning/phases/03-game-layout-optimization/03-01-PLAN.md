---
phase: 03-game-layout-optimization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tailwind.config.js
  - src/components/games/notes-master-games/NotesRecognitionGame.jsx
  - src/components/games/sight-reading-game/SightReadingGame.jsx
  - src/components/games/rhythm-games/MetronomeTrainer.jsx
  - src/components/games/notes-master-games/MemoryGame.jsx
autonomous: true

must_haves:
  truths:
    - "All 4 game modes use landscape-optimized layouts when device is in landscape orientation"
    - "All 4 game modes remain fully playable in portrait mode (WCAG 1.3.4)"
    - "Orientation changes during gameplay cause smooth layout recalculation without losing game state"
  artifacts:
    - path: "tailwind.config.js"
      provides: "landscape and portrait orientation screen modifiers"
      contains: "landscape"
    - path: "src/components/games/notes-master-games/NotesRecognitionGame.jsx"
      provides: "Landscape-optimized note recognition layout"
      contains: "landscape:"
    - path: "src/components/games/sight-reading-game/SightReadingGame.jsx"
      provides: "Landscape-optimized sight reading layout"
      contains: "landscape:"
    - path: "src/components/games/rhythm-games/MetronomeTrainer.jsx"
      provides: "Landscape-optimized metronome layout"
      contains: "landscape:"
    - path: "src/components/games/notes-master-games/MemoryGame.jsx"
      provides: "Landscape-optimized memory game layout"
      contains: "landscape:"
  key_links:
    - from: "tailwind.config.js"
      to: "all game components"
      via: "landscape: and portrait: CSS modifiers"
      pattern: "landscape:|portrait:"
---

<objective>
Add Tailwind orientation modifiers and landscape-optimized CSS layouts to all 4 game modes.

Purpose: Games currently use portrait-only vertical stacking. In landscape, the vertical space is limited but horizontal space is abundant. This plan switches game layouts to horizontal flex/grid in landscape while keeping the existing portrait layout as baseline.

Output: All 4 games render side-by-side layouts in landscape (question/notation on left, controls/answers on right) and vertical stacking in portrait.
</objective>

<execution_context>
@C:/Users/pagis/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/pagis/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-game-layout-optimization/03-RESEARCH.md
@tailwind.config.js
@src/components/games/notes-master-games/NotesRecognitionGame.jsx
@src/components/games/sight-reading-game/SightReadingGame.jsx
@src/components/games/rhythm-games/MetronomeTrainer.jsx
@src/components/games/notes-master-games/MemoryGame.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add orientation screen modifiers to Tailwind config</name>
  <files>tailwind.config.js</files>
  <action>
Add `portrait` and `landscape` custom screen entries to `theme.extend.screens` in tailwind.config.js:

```javascript
screens: {
  'portrait': { 'raw': '(orientation: portrait)' },
  'landscape': { 'raw': '(orientation: landscape)' },
}
```

Place these inside `theme.extend` alongside the existing `container.screens` (which is separate). The extend.screens object does not exist yet, so create it at the top level of `extend`.

Do NOT use `landscape-stable` with aspect-ratio -- the games do not have text input fields, so the keyboard-triggering-landscape pitfall from the research does not apply here.
  </action>
  <verify>Run `npx tailwindcss --help` to confirm config loads without errors. Then run `npm run build` to verify the full build succeeds with the new config.</verify>
  <done>Tailwind config has `landscape:` and `portrait:` modifiers available for use in JSX className strings. Build passes.</done>
</task>

<task type="auto">
  <name>Task 2: Add landscape-optimized layouts to all 4 game components</name>
  <files>
    src/components/games/notes-master-games/NotesRecognitionGame.jsx
    src/components/games/sight-reading-game/SightReadingGame.jsx
    src/components/games/rhythm-games/MetronomeTrainer.jsx
    src/components/games/notes-master-games/MemoryGame.jsx
  </files>
  <action>
For each game, apply landscape-responsive Tailwind classes to the main game area (the in-game layout, NOT the pre-game settings or victory screen). The pattern is: keep existing portrait layout as default, add `landscape:` modifiers for horizontal arrangement.

**Strategy for each game:**

1. **NotesRecognitionGame.jsx** (line ~1912, the main return):
   - The outer container is `flex h-screen flex-col`. Keep this as-is for portrait.
   - Find the main game area (the section after the header that contains the note display + answer buttons).
   - The note image display and answer grid should go side-by-side in landscape:
     - Add `landscape:flex-row landscape:items-stretch` to the main game content area
     - The note display area: add `landscape:w-1/2 landscape:flex-shrink-0`
     - The answer buttons area: add `landscape:w-1/2 landscape:overflow-y-auto`
   - Reduce vertical padding in landscape: add `landscape:py-1 landscape:gap-2`
   - Header bar: add `landscape:py-1` to compact it in landscape

2. **SightReadingGame.jsx** (this is a large component ~3526 lines):
   - The SightReadingLayout component handles the actual game layout. Check if it delegates to `SightReadingLayout.jsx` -- if so, modify that file instead.
   - The VexFlow staff display + keyboard/controls should go side-by-side in landscape:
     - Staff display gets `landscape:flex-[2]` (wider, notation needs space)
     - Controls/keyboard gets `landscape:flex-[1]`
   - Add `landscape:flex-row` to the main game content container
   - Compact the header in landscape: `landscape:py-1`

3. **MetronomeTrainer.jsx** (line ~1259):
   - Already has `sm:flex-row` on the main game area (line 1293). This is good.
   - Add `landscape:flex-row landscape:gap-2` to ensure landscape always triggers horizontal layout even on mobile (sm: breakpoint may not be hit on small phones in landscape).
   - Compact header: add `landscape:py-1` to the header bar
   - Reduce gap: add `landscape:gap-2` to the main game area

4. **MemoryGame.jsx** (line ~798):
   - The card grid is the main content. In landscape, the grid should use more columns:
     - Current grid likely uses `grid-cols-3` or `grid-cols-4` responsive classes
     - Add `landscape:grid-cols-6` or `landscape:grid-cols-8` (depending on current column count) to spread cards horizontally
   - The header + grid should have reduced vertical spacing in landscape
   - Add `landscape:py-1 landscape:gap-1` to compact vertical spacing

**Critical rules:**
- Do NOT modify any game logic, state management, or imports (except potentially adding useOrientation if needed for JS-driven layout decisions -- but prefer CSS-only with Tailwind modifiers)
- Do NOT touch the pre-game settings or victory screen rendering (those are in Plan 03)
- Keep ALL existing classes intact -- only ADD landscape: prefixed classes
- The `landscape:` modifier is purely CSS-based, so no re-renders on orientation change -- smooth by default
  </action>
  <verify>
Run `npm run build` to confirm no syntax errors. Visually inspect by running `npm run dev` and using browser DevTools to toggle between portrait and landscape viewport sizes. In landscape, game content should arrange horizontally. In portrait, layout should be unchanged from current behavior.
  </verify>
  <done>All 4 game components have landscape: Tailwind modifiers on their main game areas. Portrait layout is unchanged. Landscape layout uses horizontal arrangement. Build passes.</done>
</task>

</tasks>

<verification>
- `npm run build` passes with zero new errors
- All 4 game files contain `landscape:` class modifiers
- tailwind.config.js contains `portrait` and `landscape` screen entries
- No game logic was modified (only className strings changed)
</verification>

<success_criteria>
- Tailwind `landscape:` and `portrait:` modifiers are available project-wide
- All 4 games display horizontal side-by-side layouts in landscape orientation
- All 4 games display their original vertical layout in portrait orientation
- Zero game state or logic changes -- purely CSS modifications
</success_criteria>

<output>
After completion, create `.planning/phases/03-game-layout-optimization/03-01-SUMMARY.md`
</output>
