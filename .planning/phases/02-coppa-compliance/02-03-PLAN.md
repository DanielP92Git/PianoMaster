---
phase: 02-coppa-compliance
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/02-coppa-compliance/02-SDK-AUDIT.md
autonomous: true

must_haves:
  truths:
    - "All npm dependencies audited for data collection behavior"
    - "Network requests from app documented (CDNs, fonts, analytics)"
    - "Any problematic dependencies identified with remediation plan"
  artifacts:
    - path: ".planning/phases/02-coppa-compliance/02-SDK-AUDIT.md"
      provides: "Third-party SDK audit report"
      min_lines: 50
  key_links: []
---

<objective>
Audit all third-party dependencies and external requests for COPPA compliance - identify any SDKs that collect data from child users.

Purpose: COPPA requires no third-party data collection from under-13 users without consent
Output: Audit report documenting all dependencies and any required remediation
</objective>

<execution_context>
@C:\Users\pagis\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pagis\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-coppa-compliance/02-CONTEXT.md
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit NPM Dependencies</name>
  <files>.planning/phases/02-coppa-compliance/02-SDK-AUDIT.md</files>
  <action>
Run comprehensive dependency audit and document findings:

1. **Run npm audit**: `npm audit --json > audit-output.json` to check for known vulnerabilities

2. **Analyze package.json dependencies** for data collection risks:
   - Analytics packages (e.g., @segment/*, amplitude-*, mixpanel, posthog)
   - Crash reporting (e.g., @sentry/*, bugsnag, rollbar)
   - A/B testing (e.g., optimizely, launchdarkly)
   - Feature flags with telemetry
   - Social SDKs (facebook, google analytics)

3. **Check for known phone-home behavior** in common packages:
   - hot-module-replacement in production builds
   - Error boundary reporters
   - Performance monitoring
   - Font loading services (Google Fonts tracks usage)

4. **Audit external network requests** the app makes:
   - CDN URLs for assets
   - Font services (Google Fonts, Adobe Fonts)
   - Supabase endpoints (expected, COPPA-compliant)
   - Any analytics endpoints

5. **Create audit report** at `.planning/phases/02-coppa-compliance/02-SDK-AUDIT.md`:

```markdown
# Third-Party SDK Audit for COPPA Compliance

**Audit Date:** [date]
**Auditor:** Claude (automated)

## Summary

[Brief summary: how many dependencies checked, any concerns found]

## Dependency Analysis

### Production Dependencies

| Package | Version | Data Collection Risk | Notes |
|---------|---------|---------------------|-------|
| react | x.x.x | None | UI library |
| @supabase/supabase-js | x.x.x | Low - user data | Backend, our control |
| ... | ... | ... | ... |

### Dev Dependencies (not shipped)

[List dev dependencies - confirm they don't ship to production]

## External Network Requests

| Domain | Purpose | Data Collected | COPPA Concern |
|--------|---------|----------------|---------------|
| [supabase-url] | Backend | User data | No - our control |
| fonts.googleapis.com | Fonts | IP, user-agent | Possible |
| ... | ... | ... | ... |

## Findings

### High Priority (Must Fix)
[Any packages that actively collect child data]

### Medium Priority (Should Address)
[Packages with potential concerns]

### Low Priority (Monitor)
[Packages with minimal risk]

## Remediation Plan

[For each finding, specific action to take]

## Recommendations

1. [Recommendation 1]
2. [Recommendation 2]
...
```

6. **Check index.html and public/ folder** for:
   - External script tags
   - Preload/prefetch to external domains
   - Analytics snippets

7. **Verify Supabase COPPA stance**:
   - Document Supabase's data processing locations
   - Note any DPA requirements
   - Flag for user review if unclear
  </action>
  <verify>
Audit report exists at .planning/phases/02-coppa-compliance/02-SDK-AUDIT.md
Contains dependency table with all production dependencies
Contains external network requests table
Contains findings and remediation sections
  </verify>
  <done>
Comprehensive audit report documents all third-party data collection risks and provides remediation plan for any COPPA concerns.
  </done>
</task>

</tasks>

<verification>
- [ ] .planning/phases/02-coppa-compliance/02-SDK-AUDIT.md exists
- [ ] All production dependencies from package.json analyzed
- [ ] External network requests documented
- [ ] Findings categorized by priority
- [ ] Remediation plan for any issues found
- [ ] Supabase compliance status noted
</verification>

<success_criteria>
User has clear understanding of all third-party data collection in the app and a plan to address any COPPA concerns before deployment.
</success_criteria>

<output>
After completion, create `.planning/phases/02-coppa-compliance/02-03-SUMMARY.md`
</output>
