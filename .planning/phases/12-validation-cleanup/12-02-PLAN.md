---
phase: 12-validation-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - CLAUDE.md
  - .planning/STATE.md
  - .planning/ROADMAP.md
autonomous: false

must_haves:
  truths:
    - "User can complete treble path from first node to boss"
    - "User can complete bass path from first node to boss"
    - "User can complete rhythm path from first node to boss"
    - "XP awards correctly after completing nodes"
    - "Daily goals update when completing exercises"
    - "Documentation reflects 93-node system"
  artifacts:
    - path: "CLAUDE.md"
      provides: "Updated trail system documentation"
      contains: "93-node"
    - path: ".planning/STATE.md"
      provides: "Updated project state"
      contains: "v1.3 SHIPPED"
    - path: ".planning/ROADMAP.md"
      provides: "Phase 12 marked complete"
      contains: "[x] **Phase 12:"
  key_links:
    - from: "CLAUDE.md"
      to: "src/data/skillTrail.js"
      via: "documentation accuracy"
      pattern: "93 nodes"
---

<objective>
Complete E2E verification and finalize v1.3 release

Purpose: Verify all three trail paths work end-to-end, update documentation to reflect the 93-node system, and mark v1.3 as shipped.

Output: Verified trail system, updated documentation, v1.3 officially shipped.
</objective>

<execution_context>
@C:\Users\pagis\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pagis\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-validation-cleanup/12-CONTEXT.md
@.planning/phases/12-validation-cleanup/12-RESEARCH.md
@.planning/phases/12-validation-cleanup/12-01-SUMMARY.md
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Start dev server and prepare for E2E verification</name>
  <files></files>
  <action>
Start the development server and verify basic trail functionality:

1. Start the dev server:
   npm run dev

2. Verify the app starts without console errors
3. Navigate to /trail and confirm the trail map renders
4. Confirm all three path sections are visible (Treble, Bass, Rhythm)

Prepare a manual test checklist output for the human verification checkpoint.
  </action>
  <verify>
1. Dev server running on localhost:5174
2. /trail page loads without errors
3. Three path sections visible
  </verify>
  <done>
Dev server running, trail map renders all three paths.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete 93-node trail system with all three paths (Treble, Bass, Rhythm)</what-built>
  <how-to-verify>
Manual E2E verification of critical flows. Test each item and confirm:

**1. Treble Path (3-5 minutes)**
Visit: http://localhost:5174/trail
- [ ] First treble node is unlocked and clickable
- [ ] Click first treble node -> Modal opens with exercise details
- [ ] Click "Start Practice" -> Game loads with correct notes (C4, D4)
- [ ] Complete exercise -> VictoryScreen shows stars and XP
- [ ] Return to trail -> Stars display on completed node
- [ ] Next node is now unlocked

**2. Bass Path (3-5 minutes)**
- [ ] First bass node is unlocked (no treble prerequisite)
- [ ] Click first bass node -> Modal shows bass clef exercises
- [ ] Click "Start Practice" -> Game loads with bass clef notes
- [ ] Complete exercise -> Stars and XP awarded
- [ ] Bass path progression works correctly

**3. Rhythm Path (3-5 minutes)**
- [ ] First rhythm node is unlocked
- [ ] Click first rhythm node -> Modal shows rhythm exercises
- [ ] Click "Start Practice" -> MetronomeTrainer loads
- [ ] Complete exercise -> Stars and XP awarded
- [ ] Rhythm path progression works correctly

**4. XP and Leveling (2 minutes)**
- [ ] XP counter in header/profile shows correct total
- [ ] Completing nodes increases XP
- [ ] Level increases when XP threshold crossed (if applicable)

**5. Daily Goals (2 minutes)**
Visit: http://localhost:5174 (Dashboard)
- [ ] Daily goals card is visible
- [ ] Shows 3 goals for today
- [ ] Progress updates after completing exercises

If any check fails, describe the issue. Type "approved" to continue.
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe issues found</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Update CLAUDE.md documentation</name>
  <files>CLAUDE.md</files>
  <action>
Update CLAUDE.md to reflect the current 93-node trail system:

1. Find the "Gamification Trail System" section
2. Update the summary to reflect:
   - 93 nodes total (was 18 in legacy system)
   - 3 paths: Treble (23 nodes), Bass (22 nodes), Rhythm (36 nodes), plus 12 Boss nodes
   - nodeGenerator.js no longer exists
   - All nodes are now statically defined in unit files

3. Update the "Trail Node Structure" example if needed to match current format

4. Update the "Key Files" subsection:
   - Remove any references to nodeGenerator.js
   - Ensure src/data/units/*.js files are documented
   - Update src/data/skillTrail.js description to note LEGACY_NODES was removed

5. Add a note under "Trail Node Structure" that all nodes come from expandedNodes.js which imports from unit files

Do NOT change unrelated sections. Keep changes minimal and accurate.
  </action>
  <verify>
1. grep "93" CLAUDE.md returns matches in trail system section
2. grep "nodeGenerator" CLAUDE.md returns no matches
3. grep "LEGACY_NODES" CLAUDE.md returns no matches (or only historical context)
  </verify>
  <done>
CLAUDE.md updated with accurate 93-node trail system documentation.
  </done>
</task>

<task type="auto">
  <name>Task 3: Mark v1.3 as shipped and update project state</name>
  <files>.planning/STATE.md, .planning/ROADMAP.md</files>
  <action>
Finalize v1.3 as shipped:

1. Update .planning/STATE.md:
   - Change "Current focus" to "v1.3 Trail System Redesign (SHIPPED)"
   - Update "Current Position" to show Phase 12 complete
   - Update "Progress" bar to show 100%: "v1.3 [##########] SHIPPED"
   - Add milestone history entry for v1.3
   - Update "Last activity" date
   - Clear any Phase 12-specific pending items
   - Update "Session Continuity" to note v1.3 is complete

2. Update .planning/ROADMAP.md:
   - Mark Phase 12 as complete: "[x] **Phase 12: Validation & Cleanup**"
   - Update Plans count: "**Plans**: 2 plans"
   - Update plan checkboxes to checked
   - Update Progress table: Status = "Complete", Completed = today's date
   - Update milestone status: v1.3 Trail System Redesign = shipped

3. Create final commit:

   git add CLAUDE.md .planning/STATE.md .planning/ROADMAP.md
   git commit -m "docs(v1.3): mark Trail System Redesign as shipped

   v1.3 Trail System Redesign is complete:
   - 93 nodes across 3 paths (Treble: 23, Bass: 22, Rhythm: 36, Boss: 12)
   - Legacy 18-node system removed
   - All E2E verification passed

   Phases 8-12 complete. Ready for production deployment.

   Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
  </action>
  <verify>
1. grep "SHIPPED" .planning/STATE.md returns v1.3 line
2. grep "\[x\].*Phase 12" .planning/ROADMAP.md returns match
3. git log -1 shows shipped commit
  </verify>
  <done>
v1.3 Trail System Redesign marked as shipped. Documentation updated. Ready for production deployment.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. All three trail paths verified working end-to-end
2. CLAUDE.md accurately reflects 93-node system
3. STATE.md shows v1.3 SHIPPED
4. ROADMAP.md shows Phase 12 complete
5. All changes committed
</verification>

<success_criteria>
- All three paths (treble, bass, rhythm) verified playable end-to-end
- XP and daily goals working correctly
- Documentation updated to reflect 93-node system
- v1.3 officially marked as shipped
- Clean commits documenting the release
</success_criteria>

<output>
After completion, create `.planning/phases/12-validation-cleanup/12-02-SUMMARY.md`
</output>
