---
phase: 10-rhythm-implementation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/units/rhythmUnit3Redesigned.js
  - src/data/units/rhythmUnit4Redesigned.js
autonomous: true

must_haves:
  truths:
    - "User can practice eighth notes combined with basic durations in Unit 3"
    - "User can learn quarter rest, half rest, and whole rest as dedicated skills in Unit 4"
    - "Eighth notes only introduced AFTER quarters, halves, and wholes are established"
    - "Rests treated as a distinct learning unit (silence is a skill)"
  artifacts:
    - path: "src/data/units/rhythmUnit3Redesigned.js"
      provides: "Rhythm Unit 3 nodes (7 nodes: introduces eighth notes)"
      exports: ["rhythmUnit3Nodes"]
      min_lines: 250
    - path: "src/data/units/rhythmUnit4Redesigned.js"
      provides: "Rhythm Unit 4 nodes (7 nodes: dedicated rests unit)"
      exports: ["rhythmUnit4Nodes"]
      min_lines: 250
  key_links:
    - from: "src/data/units/rhythmUnit3Redesigned.js"
      to: "rhythmUnit2 boss node"
      via: "prerequisite chain"
      pattern: "prerequisites.*boss_rhythm_2"
    - from: "src/data/units/rhythmUnit4Redesigned.js"
      to: "rhythmUnit3 boss node"
      via: "prerequisite chain"
      pattern: "prerequisites.*boss_rhythm_3"
---

<objective>
Create Rhythm Units 3-4: Eighth notes introduction and dedicated rests unit

Purpose: Unit 3 introduces eighth notes (running notes) after basic duration foundation. Unit 4 treats rests as a dedicated skill - silence is learned separately from sounds.

Output: Two rhythm unit files with 7 nodes each, following the established pedagogical pattern
</objective>

<execution_context>
@C:\Users\pagis\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pagis\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-rhythm-implementation/10-CONTEXT.md
@.planning/phases/10-rhythm-implementation/10-RESEARCH.md

# Template for node structure
@src/data/units/bassUnit1Redesigned.js
@src/data/nodeTypes.js
@src/data/constants.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Rhythm Unit 3 - Running Notes (Introduce Eighth Notes)</name>
  <files>src/data/units/rhythmUnit3Redesigned.js</files>
  <action>
Create rhythmUnit3Redesigned.js with 7 nodes:

**Unit constants:**
- UNIT_ID = 3
- UNIT_NAME = 'Running Notes'
- CATEGORY = 'rhythm'
- START_ORDER = 114 (after Unit 2's 7 nodes: 107-113)

**Tempo range for Unit 3:** 70-80 BPM for discovery, 90-100 BPM for speed
**Pattern length:** 4-8 beats (can increase for practice nodes)

**Node sequence (7 nodes):**

1. **Node 1 (Discovery):** "Meet Eighth Notes"
   - id: rhythm_3_1
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn to play two notes per beat"
   - rhythmConfig: {
       complexity: RHYTHM_COMPLEXITY.VARIED,
       durations: ['q', '8'],
       focusDurations: ['8'],
       contextDurations: ['q'],
       tempo: { min: 70, max: 80, default: 75 },
       pitch: 'C4',
       timeSignature: '4/4'
     }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: 'Eighth Notes (1/2 beat)'
   - exercises: [{ type: EXERCISE_TYPES.RHYTHM, config: { rhythmPatterns: ['quarter', 'eighth'], tempo: 75, measuresPerPattern: 1, difficulty: 'intermediate' } }]
   - skills: ['quarter_note', 'eighth_note']
   - xpReward: 55, prerequisites: ['boss_rhythm_2']

2. **Node 2 (Practice):** "Practice Eighth Notes"
   - id: rhythm_3_2
   - nodeType: NODE_TYPES.PRACTICE
   - rhythmConfig: { durations: ['q', '8'], tempo: { min: 75, max: 85, default: 80 } }
   - exercises: [{ config: { measuresPerPattern: 2, difficulty: 'intermediate' } }]
   - xpReward: 60, prerequisites: ['rhythm_3_1']

3. **Node 3 (Discovery):** "Running and Walking"
   - id: rhythm_3_3
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Feel the difference between walking (quarter) and running (eighth)"
   - Focus on contrast between 1-beat and 1/2-beat notes
   - rhythmConfig: { durations: ['q', 'h', '8'], tempo: { min: 70, max: 80, default: 75 } }
   - xpReward: 60, prerequisites: ['rhythm_3_2']

4. **Node 4 (Practice):** "Mix It Up"
   - id: rhythm_3_4
   - nodeType: NODE_TYPES.PRACTICE
   - rhythmConfig: { durations: ['q', 'h', '8'], tempo: { min: 75, max: 85, default: 80 } }
   - exercises: [{ config: { measuresPerPattern: 2, difficulty: 'intermediate' } }]
   - xpReward: 65, prerequisites: ['rhythm_3_3']

5. **Node 5 (Mix-Up):** "Rhythm Variety"
   - id: rhythm_3_5
   - nodeType: NODE_TYPES.MIX_UP
   - rhythmConfig: { durations: ['q', 'h', 'w', '8'] }
   - xpReward: 65, prerequisites: ['rhythm_3_4']

6. **Node 6 (Speed Round):** "Speed Running"
   - id: rhythm_3_6
   - nodeType: NODE_TYPES.SPEED_ROUND
   - rhythmConfig: { durations: ['q', 'h', '8'], tempo: { min: 90, max: 100, default: 95 } }
   - xpReward: 70, prerequisites: ['rhythm_3_5']

7. **Node 7 (Mini-Boss):** "Running Notes Master"
   - id: boss_rhythm_3
   - nodeType: NODE_TYPES.MINI_BOSS
   - category: 'boss'
   - rhythmConfig: { complexity: RHYTHM_COMPLEXITY.VARIED, durations: ['q', 'h', 'w', '8'], tempo: { min: 75, max: 85, default: 80 } }
   - exercises: [{ config: { measuresPerPattern: 4, questionCount: 12 } }]
   - xpReward: 120, accessoryUnlock: 'rhythm_badge_3', isBoss: true
   - prerequisites: ['rhythm_3_6']

**VexFlow duration codes reminder:**
- 'q' = quarter note
- 'h' = half note
- 'w' = whole note
- '8' = eighth note
  </action>
  <verify>
1. File exists: src/data/units/rhythmUnit3Redesigned.js
2. Export check: `grep -q "export const rhythmUnit3Nodes" src/data/units/rhythmUnit3Redesigned.js`
3. Node count: `grep -c "id: 'rhythm_3_" src/data/units/rhythmUnit3Redesigned.js` returns 6
4. Boss node: `grep -q "id: 'boss_rhythm_3'" src/data/units/rhythmUnit3Redesigned.js`
5. Prerequisite link: `grep -q "prerequisites.*boss_rhythm_2" src/data/units/rhythmUnit3Redesigned.js`
6. Eighth notes: `grep -q "'8'" src/data/units/rhythmUnit3Redesigned.js`
  </verify>
  <done>
rhythmUnit3Redesigned.js exists with 7 nodes (6 rhythm_3_X + 1 boss_rhythm_3), links to boss_rhythm_2 as prerequisite, introduces eighth notes ('8')
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Rhythm Unit 4 - Sound of Silence (Dedicated Rests)</name>
  <files>src/data/units/rhythmUnit4Redesigned.js</files>
  <action>
Create rhythmUnit4Redesigned.js with 7 nodes:

**Unit constants:**
- UNIT_ID = 4
- UNIT_NAME = 'The Sound of Silence'
- CATEGORY = 'rhythm'
- START_ORDER = 121 (after Unit 3's 7 nodes: 114-120)

**Tempo range for Unit 4:** 70-80 BPM (same as Unit 3, rests add complexity)
**Key pedagogical point:** Rests are a skill - silence is intentional, not an absence

**VexFlow duration codes for rests:**
- 'qr' = quarter rest
- 'hr' = half rest
- 'wr' = whole rest

**Node sequence (7 nodes):**

1. **Node 1 (Discovery):** "Meet Quarter Rest"
   - id: rhythm_4_1
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn to count silence - 1 beat of rest"
   - rhythmConfig: {
       complexity: RHYTHM_COMPLEXITY.MEDIUM,
       durations: ['q', 'qr'],
       focusDurations: ['qr'],
       contextDurations: ['q'],
       tempo: { min: 60, max: 70, default: 65 },
       pitch: 'C4',
       timeSignature: '4/4',
       includeRests: true
     }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: 'Quarter Rest (1 beat silence)'
   - exercises: [{ type: EXERCISE_TYPES.RHYTHM, config: { rhythmPatterns: ['quarter', 'quarter-rest'], tempo: 65, measuresPerPattern: 1, difficulty: 'intermediate', includeRests: true } }]
   - skills: ['quarter_note', 'quarter_rest']
   - xpReward: 55, prerequisites: ['boss_rhythm_3']

2. **Node 2 (Practice):** "Practice Quarter Rests"
   - id: rhythm_4_2
   - nodeType: NODE_TYPES.PRACTICE
   - rhythmConfig: { durations: ['q', 'qr'], tempo: { min: 65, max: 75, default: 70 }, includeRests: true }
   - exercises: [{ config: { measuresPerPattern: 2, difficulty: 'intermediate' } }]
   - xpReward: 55, prerequisites: ['rhythm_4_1']

3. **Node 3 (Discovery):** "Meet Half Rest"
   - id: rhythm_4_3
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn 2 beats of silence"
   - rhythmConfig: { durations: ['q', 'h', 'qr', 'hr'], focusDurations: ['hr'], contextDurations: ['q', 'h', 'qr'], tempo: { min: 60, max: 70, default: 65 }, includeRests: true }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: 'Half Rest (2 beats silence)'
   - skills: ['quarter_rest', 'half_rest']
   - xpReward: 60, prerequisites: ['rhythm_4_2']

4. **Node 4 (Practice):** "Practice Rests"
   - id: rhythm_4_4
   - nodeType: NODE_TYPES.PRACTICE
   - rhythmConfig: { durations: ['q', 'h', 'qr', 'hr'], tempo: { min: 65, max: 75, default: 70 }, includeRests: true }
   - xpReward: 60, prerequisites: ['rhythm_4_3']

5. **Node 5 (Discovery):** "Meet Whole Rest"
   - id: rhythm_4_5
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn 4 beats of silence - a full measure of rest"
   - rhythmConfig: { durations: ['q', 'h', 'w', 'qr', 'hr', 'wr'], focusDurations: ['wr'], tempo: { min: 60, max: 70, default: 65 }, includeRests: true }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: 'Whole Rest (4 beats silence)'
   - Note: This node uses DISCOVERY instead of MIX_UP to introduce whole rest
   - skills: ['quarter_rest', 'half_rest', 'whole_rest']
   - xpReward: 65, prerequisites: ['rhythm_4_4']

6. **Node 6 (Speed Round):** "Speed Silence"
   - id: rhythm_4_6
   - nodeType: NODE_TYPES.SPEED_ROUND
   - rhythmConfig: { durations: ['q', 'h', 'qr', 'hr'], tempo: { min: 85, max: 95, default: 90 }, includeRests: true }
   - xpReward: 70, prerequisites: ['rhythm_4_5']

7. **Node 7 (Mini-Boss):** "Silence Master"
   - id: boss_rhythm_4
   - nodeType: NODE_TYPES.MINI_BOSS
   - category: 'boss'
   - rhythmConfig: { complexity: RHYTHM_COMPLEXITY.VARIED, durations: ['q', 'h', 'qr', 'hr', 'wr'], tempo: { min: 70, max: 80, default: 75 }, includeRests: true }
   - exercises: [{ config: { measuresPerPattern: 4, questionCount: 12, includeRests: true } }]
   - xpReward: 130, accessoryUnlock: 'rhythm_badge_4', isBoss: true
   - prerequisites: ['rhythm_4_6']

**Important:** Unit 4 has only 3 Discovery nodes (quarter rest, half rest, whole rest) instead of the usual 2. This is intentional - each rest type deserves dedicated introduction. The Mix-Up node is replaced with a third Discovery node.
  </action>
  <verify>
1. File exists: src/data/units/rhythmUnit4Redesigned.js
2. Export check: `grep -q "export const rhythmUnit4Nodes" src/data/units/rhythmUnit4Redesigned.js`
3. Node count: `grep -c "id: 'rhythm_4_" src/data/units/rhythmUnit4Redesigned.js` returns 6
4. Boss node: `grep -q "id: 'boss_rhythm_4'" src/data/units/rhythmUnit4Redesigned.js`
5. Prerequisite link: `grep -q "prerequisites.*boss_rhythm_3" src/data/units/rhythmUnit4Redesigned.js`
6. Rest durations: `grep -q "'qr'" src/data/units/rhythmUnit4Redesigned.js` and similar for 'hr', 'wr'
7. includeRests flag: `grep -q "includeRests: true" src/data/units/rhythmUnit4Redesigned.js`
  </verify>
  <done>
rhythmUnit4Redesigned.js exists with 7 nodes (6 rhythm_4_X + 1 boss_rhythm_4), links to boss_rhythm_3 as prerequisite, introduces all rest types (qr, hr, wr) with includeRests flag
  </done>
</task>

</tasks>

<verification>
Run after all tasks complete:

1. Both files exist with proper exports:
```bash
ls -la src/data/units/rhythmUnit3Redesigned.js src/data/units/rhythmUnit4Redesigned.js
```

2. Verify node counts:
```bash
grep -c "id: 'rhythm_3_" src/data/units/rhythmUnit3Redesigned.js
grep -c "id: 'rhythm_4_" src/data/units/rhythmUnit4Redesigned.js
```

3. Verify exports:
```bash
grep "export const rhythm" src/data/units/rhythmUnit3Redesigned.js src/data/units/rhythmUnit4Redesigned.js
```

4. Verify rest duration codes present in Unit 4:
```bash
grep -E "'qr'|'hr'|'wr'" src/data/units/rhythmUnit4Redesigned.js
```

5. Verify eighth note codes present in Unit 3:
```bash
grep -E "'8'" src/data/units/rhythmUnit3Redesigned.js
```
</verification>

<success_criteria>
1. rhythmUnit3Redesigned.js exists with 7 nodes introducing eighth notes
2. rhythmUnit4Redesigned.js exists with 7 nodes as dedicated rests unit
3. Both files export named arrays (rhythmUnit3Nodes, rhythmUnit4Nodes)
4. Node IDs follow pattern: rhythm_X_Y for regular, boss_rhythm_X for boss nodes
5. Prerequisites chain correctly: Unit 3 first node requires boss_rhythm_2, Unit 4 requires boss_rhythm_3
6. Unit 3 uses '8' duration code for eighth notes
7. Unit 4 uses 'qr', 'hr', 'wr' duration codes for rests
8. Unit 4 includes includeRests: true in rhythmConfig and exercise config
9. XP rewards continue increasing across units
</success_criteria>

<output>
After completion, create `.planning/phases/10-rhythm-implementation/10-02-SUMMARY.md`
</output>
