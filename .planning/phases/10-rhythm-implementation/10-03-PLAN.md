---
phase: 10-rhythm-implementation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/units/rhythmUnit5Redesigned.js
  - src/data/units/rhythmUnit6Redesigned.js
autonomous: true

must_haves:
  truths:
    - "User can learn dotted half notes and dotted quarter notes in Unit 5"
    - "User can learn sixteenth notes as groups of 4 in Unit 6"
    - "3/4 time signature introduced in Unit 5 with dedicated nodes"
    - "Unit 6 has true Boss node (isBoss: true) as trail milestone"
  artifacts:
    - path: "src/data/units/rhythmUnit5Redesigned.js"
      provides: "Rhythm Unit 5 nodes (7 nodes: dotted notes + 3/4 time)"
      exports: ["rhythmUnit5Nodes"]
      min_lines: 280
    - path: "src/data/units/rhythmUnit6Redesigned.js"
      provides: "Rhythm Unit 6 nodes (7 nodes: sixteenth notes)"
      exports: ["rhythmUnit6Nodes"]
      min_lines: 250
  key_links:
    - from: "src/data/units/rhythmUnit5Redesigned.js"
      to: "rhythmUnit4 boss node"
      via: "prerequisite chain"
      pattern: "prerequisites.*boss_rhythm_4"
    - from: "src/data/units/rhythmUnit6Redesigned.js"
      to: "rhythmUnit5 boss node"
      via: "prerequisite chain"
      pattern: "prerequisites.*boss_rhythm_5"
---

<objective>
Create Rhythm Units 5-6: Advanced durations (dotted notes, sixteenths) and new time signature

Purpose: Unit 5 introduces dotted notes (dotted half = 3 beats, dotted quarter = 1.5 beats) and 3/4 time signature. Unit 6 completes the rhythm path with sixteenth notes as the most advanced concept.

Output: Two rhythm unit files with 7 nodes each, completing the rhythm learning path
</objective>

<execution_context>
@C:\Users\pagis\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pagis\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-rhythm-implementation/10-CONTEXT.md
@.planning/phases/10-rhythm-implementation/10-RESEARCH.md

# Template for node structure
@src/data/units/bassUnit1Redesigned.js
@src/data/nodeTypes.js
@src/data/constants.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Rhythm Unit 5 - Dotted Notes and 3/4 Time</name>
  <files>src/data/units/rhythmUnit5Redesigned.js</files>
  <action>
Create rhythmUnit5Redesigned.js with 7 nodes:

**Unit constants:**
- UNIT_ID = 5
- UNIT_NAME = 'Dotted Notes'
- CATEGORY = 'rhythm'
- START_ORDER = 128 (after Unit 4's 7 nodes: 121-127)

**Tempo range for Unit 5:** 75-85 BPM
**Key pedagogical points:**
- Dotted half first (3 beats - simpler concept)
- Dotted quarter second (1.5 beats - requires subdivision understanding)
- 3/4 time introduced with dedicated nodes
- From CONTEXT.md: "Pickup notes (anacrusis): Only in Units 5-6" - can include if game supports

**VexFlow duration codes for dotted notes:**
- 'hd' = dotted half note (3 beats)
- 'qd' = dotted quarter note (1.5 beats)

**Node sequence (7 nodes):**

1. **Node 1 (Discovery):** "Meet Dotted Half Notes"
   - id: rhythm_5_1
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn notes that last 3 beats"
   - rhythmConfig: {
       complexity: RHYTHM_COMPLEXITY.VARIED,
       durations: ['q', 'h', 'hd'],
       focusDurations: ['hd'],
       contextDurations: ['q', 'h'],
       tempo: { min: 70, max: 80, default: 75 },
       pitch: 'C4',
       timeSignature: '4/4'
     }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: 'Dotted Half Note (3 beats)'
   - exercises: [{ type: EXERCISE_TYPES.RHYTHM, config: { rhythmPatterns: ['quarter', 'half', 'dotted-half'], tempo: 75, measuresPerPattern: 1, difficulty: 'intermediate' } }]
   - skills: ['dotted_half_note']
   - xpReward: 65, prerequisites: ['boss_rhythm_4']

2. **Node 2 (Practice):** "Practice Dotted Halves"
   - id: rhythm_5_2
   - nodeType: NODE_TYPES.PRACTICE
   - rhythmConfig: { durations: ['q', 'h', 'hd'], tempo: { min: 75, max: 85, default: 80 } }
   - exercises: [{ config: { measuresPerPattern: 2, difficulty: 'intermediate' } }]
   - xpReward: 65, prerequisites: ['rhythm_5_1']

3. **Node 3 (Discovery):** "Waltz Time (3/4)"
   - id: rhythm_5_3
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn to play in 3/4 time - 3 beats per measure"
   - rhythmConfig: {
       complexity: RHYTHM_COMPLEXITY.MEDIUM,
       durations: ['q', 'hd'],
       tempo: { min: 70, max: 80, default: 75 },
       pitch: 'C4',
       timeSignature: '3/4',
       beatsPerMeasure: 3
     }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: '3/4 Time (Waltz)'
   - skills: ['three_four_time']
   - xpReward: 70, prerequisites: ['rhythm_5_2']

4. **Node 4 (Discovery):** "Meet Dotted Quarter Notes"
   - id: rhythm_5_4
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn notes that last 1.5 beats"
   - rhythmConfig: {
       durations: ['q', '8', 'qd'],
       focusDurations: ['qd'],
       contextDurations: ['q', '8'],
       tempo: { min: 70, max: 80, default: 75 },
       pitch: 'C4',
       timeSignature: '4/4'
     }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: 'Dotted Quarter Note (1.5 beats)'
   - skills: ['dotted_quarter_note']
   - xpReward: 70, prerequisites: ['rhythm_5_3']

5. **Node 5 (Practice):** "Practice All Dotted Notes"
   - id: rhythm_5_5
   - nodeType: NODE_TYPES.PRACTICE
   - rhythmConfig: { durations: ['q', 'h', 'hd', 'qd', '8'], tempo: { min: 75, max: 85, default: 80 } }
   - exercises: [{ config: { measuresPerPattern: 2 } }]
   - xpReward: 75, prerequisites: ['rhythm_5_4']

6. **Node 6 (Speed Round):** "Speed Dots"
   - id: rhythm_5_6
   - nodeType: NODE_TYPES.SPEED_ROUND
   - rhythmConfig: { durations: ['q', 'h', 'hd', 'qd', '8'], tempo: { min: 90, max: 100, default: 95 } }
   - xpReward: 80, prerequisites: ['rhythm_5_5']

7. **Node 7 (Mini-Boss):** "Dotted Notes Master"
   - id: boss_rhythm_5
   - nodeType: NODE_TYPES.MINI_BOSS
   - category: 'boss'
   - rhythmConfig: { complexity: RHYTHM_COMPLEXITY.VARIED, durations: ['q', 'h', 'hd', 'qd', '8'], tempo: { min: 75, max: 85, default: 80 } }
   - exercises: [{ config: { measuresPerPattern: 4, questionCount: 12 } }]
   - Note: Some exercises in 3/4, some in 4/4 to test both time signatures
   - xpReward: 140, accessoryUnlock: 'rhythm_badge_5', isBoss: true
   - prerequisites: ['rhythm_5_6']

**Important notes:**
- Unit 5 has 4 Discovery nodes (dotted half, 3/4 time, dotted quarter, plus standard)
- This is intentional - each new concept deserves dedicated introduction
- Node 5 replaces Mix-Up with Practice to consolidate all dotted notes
  </action>
  <verify>
1. File exists: src/data/units/rhythmUnit5Redesigned.js
2. Export check: `grep -q "export const rhythmUnit5Nodes" src/data/units/rhythmUnit5Redesigned.js`
3. Node count: `grep -c "id: 'rhythm_5_" src/data/units/rhythmUnit5Redesigned.js` returns 6
4. Boss node: `grep -q "id: 'boss_rhythm_5'" src/data/units/rhythmUnit5Redesigned.js`
5. Prerequisite link: `grep -q "prerequisites.*boss_rhythm_4" src/data/units/rhythmUnit5Redesigned.js`
6. Dotted durations: `grep -E "'hd'|'qd'" src/data/units/rhythmUnit5Redesigned.js`
7. 3/4 time: `grep -q "timeSignature: '3/4'" src/data/units/rhythmUnit5Redesigned.js`
  </verify>
  <done>
rhythmUnit5Redesigned.js exists with 7 nodes (6 rhythm_5_X + 1 boss_rhythm_5), links to boss_rhythm_4, introduces dotted notes ('hd', 'qd') and 3/4 time signature
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Rhythm Unit 6 - Sixteenth Notes (Final Unit)</name>
  <files>src/data/units/rhythmUnit6Redesigned.js</files>
  <action>
Create rhythmUnit6Redesigned.js with 7 nodes:

**Unit constants:**
- UNIT_ID = 6
- UNIT_NAME = 'Sixteenth Notes'
- CATEGORY = 'rhythm'
- START_ORDER = 135 (after Unit 5's 7 nodes: 128-134)

**Tempo range for Unit 6:** 80-90 BPM
**Pattern length:** 8 beats (more complex patterns for advanced unit)
**Key pedagogical points:**
- Sixteenth notes as groups of 4 (one beat = four sixteenths)
- Then mixed patterns with eighths
- BOSS node (true boss, not mini-boss) - trail milestone unlocked

**VexFlow duration code:**
- '16' = sixteenth note

**Node sequence (7 nodes):**

1. **Node 1 (Discovery):** "Meet Sixteenth Notes"
   - id: rhythm_6_1
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Learn to play four notes per beat"
   - rhythmConfig: {
       complexity: RHYTHM_COMPLEXITY.ALL,
       durations: ['q', '16'],
       focusDurations: ['16'],
       contextDurations: ['q'],
       tempo: { min: 75, max: 85, default: 80 },
       pitch: 'C4',
       timeSignature: '4/4'
     }
   - newContent: NEW_CONTENT_TYPES.RHYTHM, newContentDescription: 'Sixteenth Notes (1/4 beat)'
   - exercises: [{ type: EXERCISE_TYPES.RHYTHM, config: { rhythmPatterns: ['quarter', 'sixteenth'], tempo: 80, measuresPerPattern: 1, difficulty: 'advanced' } }]
   - skills: ['sixteenth_note']
   - xpReward: 75, prerequisites: ['boss_rhythm_5']

2. **Node 2 (Practice):** "Practice Sixteenth Notes"
   - id: rhythm_6_2
   - nodeType: NODE_TYPES.PRACTICE
   - description: "Groups of four - one beat at a time"
   - rhythmConfig: { durations: ['q', '16'], tempo: { min: 80, max: 90, default: 85 } }
   - exercises: [{ config: { measuresPerPattern: 2, difficulty: 'advanced' } }]
   - xpReward: 80, prerequisites: ['rhythm_6_1']

3. **Node 3 (Discovery):** "Sixteenths and Eighths"
   - id: rhythm_6_3
   - nodeType: NODE_TYPES.DISCOVERY
   - description: "Mix sixteenth notes with eighth notes"
   - rhythmConfig: { durations: ['q', '8', '16'], focusDurations: [], tempo: { min: 75, max: 85, default: 80 } }
   - xpReward: 80, prerequisites: ['rhythm_6_2']

4. **Node 4 (Practice):** "Fast and Faster"
   - id: rhythm_6_4
   - nodeType: NODE_TYPES.PRACTICE
   - rhythmConfig: { durations: ['q', 'h', '8', '16'], tempo: { min: 80, max: 90, default: 85 } }
   - exercises: [{ config: { measuresPerPattern: 2 } }]
   - xpReward: 85, prerequisites: ['rhythm_6_3']

5. **Node 5 (Mix-Up):** "All Rhythms"
   - id: rhythm_6_5
   - nodeType: NODE_TYPES.MIX_UP
   - description: "Every duration you've learned"
   - rhythmConfig: { durations: ['q', 'h', 'w', '8', '16', 'qd', 'hd'] }
   - xpReward: 85, prerequisites: ['rhythm_6_4']

6. **Node 6 (Speed Round):** "Speed Master"
   - id: rhythm_6_6
   - nodeType: NODE_TYPES.SPEED_ROUND
   - rhythmConfig: { durations: ['q', 'h', '8', '16'], tempo: { min: 95, max: 105, default: 100 } }
   - xpReward: 90, prerequisites: ['rhythm_6_5']

7. **Node 7 (BOSS):** "Rhythm Champion"
   - id: boss_rhythm_6
   - nodeType: NODE_TYPES.BOSS (NOT MINI_BOSS - true boss for trail unlock)
   - category: 'boss'
   - description: "Prove your mastery of ALL rhythms!"
   - rhythmConfig: {
       complexity: RHYTHM_COMPLEXITY.ALL,
       durations: ['q', 'h', 'w', '8', '16', 'qd', 'hd'],
       tempo: { min: 80, max: 90, default: 85 },
       pitch: 'C4',
       timeSignature: '4/4'
     }
   - exercises: [
       { type: EXERCISE_TYPES.RHYTHM, config: { measuresPerPattern: 4, questionCount: 15, difficulty: 'advanced' } }
     ]
   - skills: all duration skills
   - xpReward: 200, accessoryUnlock: 'rhythm_champion_badge', isBoss: true
   - prerequisites: ['rhythm_6_6']

**Important:** This is the ONLY true BOSS node in the rhythm path (NODE_TYPES.BOSS not MINI_BOSS). Units 1-5 use MINI_BOSS for unit completion, Unit 6 uses BOSS for path completion.
  </action>
  <verify>
1. File exists: src/data/units/rhythmUnit6Redesigned.js
2. Export check: `grep -q "export const rhythmUnit6Nodes" src/data/units/rhythmUnit6Redesigned.js`
3. Node count: `grep -c "id: 'rhythm_6_" src/data/units/rhythmUnit6Redesigned.js` returns 6
4. Boss node: `grep -q "id: 'boss_rhythm_6'" src/data/units/rhythmUnit6Redesigned.js`
5. True Boss type: `grep -q "NODE_TYPES.BOSS" src/data/units/rhythmUnit6Redesigned.js` (not MINI_BOSS for final node)
6. Prerequisite link: `grep -q "prerequisites.*boss_rhythm_5" src/data/units/rhythmUnit6Redesigned.js`
7. Sixteenth notes: `grep -q "'16'" src/data/units/rhythmUnit6Redesigned.js`
8. High XP for boss: `grep -q "xpReward: 200" src/data/units/rhythmUnit6Redesigned.js`
  </verify>
  <done>
rhythmUnit6Redesigned.js exists with 7 nodes (6 rhythm_6_X + 1 boss_rhythm_6), uses NODE_TYPES.BOSS for final node, introduces sixteenth notes ('16'), highest XP rewards
  </done>
</task>

</tasks>

<verification>
Run after all tasks complete:

1. Both files exist with proper exports:
```bash
ls -la src/data/units/rhythmUnit5Redesigned.js src/data/units/rhythmUnit6Redesigned.js
```

2. Verify node counts:
```bash
grep -c "id: 'rhythm_5_" src/data/units/rhythmUnit5Redesigned.js
grep -c "id: 'rhythm_6_" src/data/units/rhythmUnit6Redesigned.js
```

3. Verify exports:
```bash
grep "export const rhythm" src/data/units/rhythmUnit5Redesigned.js src/data/units/rhythmUnit6Redesigned.js
```

4. Verify dotted note codes in Unit 5:
```bash
grep -E "'hd'|'qd'" src/data/units/rhythmUnit5Redesigned.js
```

5. Verify sixteenth note codes in Unit 6:
```bash
grep -E "'16'" src/data/units/rhythmUnit6Redesigned.js
```

6. Verify 3/4 time signature in Unit 5:
```bash
grep "3/4" src/data/units/rhythmUnit5Redesigned.js
```

7. Verify final boss is true BOSS type (not MINI_BOSS):
```bash
grep -A2 "boss_rhythm_6" src/data/units/rhythmUnit6Redesigned.js | grep -q "BOSS"
```
</verification>

<success_criteria>
1. rhythmUnit5Redesigned.js exists with 7 nodes introducing dotted notes and 3/4 time
2. rhythmUnit6Redesigned.js exists with 7 nodes introducing sixteenth notes
3. Both files export named arrays (rhythmUnit5Nodes, rhythmUnit6Nodes)
4. Node IDs follow pattern: rhythm_X_Y for regular, boss_rhythm_X for boss nodes
5. Prerequisites chain correctly: Unit 5 requires boss_rhythm_4, Unit 6 requires boss_rhythm_5
6. Unit 5 uses 'hd', 'qd' duration codes and includes 3/4 time signature
7. Unit 6 uses '16' duration code for sixteenth notes
8. Unit 6 final boss uses NODE_TYPES.BOSS (not MINI_BOSS)
9. XP rewards highest in Unit 6 (final boss = 200)
10. All 6 rhythm units complete the progression: q+h -> +w -> +8 -> rests -> dotted -> 16
</success_criteria>

<output>
After completion, create `.planning/phases/10-rhythm-implementation/10-03-SUMMARY.md`
</output>
