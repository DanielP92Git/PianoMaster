---
phase: 06-trail-stabilization
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can navigate to any of the 26 treble clef nodes on the trail map"
    - "User can start Memory Game from nodes treble_1_4, treble_2_5, treble_3_8"
    - "Memory Game auto-starts with correct configuration (notes, grid size)"
    - "User can complete a multi-exercise node with proper navigation"
    - "Progress persists after page refresh (stars visible on completed nodes)"
    - "No console errors during normal trail navigation and game completion"
  artifacts:
    - path: "test_results.md"
      provides: "Test execution results for all 10 TEST_PLAN.md cases"
      status: "created during testing"
  key_links:
    - from: "TrailNodeModal.jsx"
      to: "/notes-master-mode/memory-game"
      via: "navigate with nodeConfig state"
      pattern: "navigate.*memory-game.*nodeConfig"
    - from: "MemoryGame.jsx"
      to: "VictoryScreen"
      via: "completion callback"
      pattern: "onComplete|VictoryScreen"
---

<objective>
Execute systematic manual testing from TEST_PLAN.md and fix any discovered bugs.

Purpose: Validate that the committed trail redesign work functions correctly before cleanup. Testing ensures all 15 requirements are met and users have a working experience.
Output: All 10 test cases pass, any discovered bugs fixed with separate commits.
</objective>

<execution_context>
@C:\Users\pagis\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pagis\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-trail-stabilization/06-01-SUMMARY.md

# Test plan with all test cases
@TEST_PLAN.md

# Key components being tested
@src/components/games/notes-master-games/MemoryGame.jsx
@src/components/trail/TrailMap.jsx
@src/components/trail/TrailNodeModal.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Execute pre-test verification</name>
  <files>verify-redesign.mjs</files>
  <action>
Run the verification script to confirm node definitions load correctly.

1. Start dev server (if not running):
   ```bash
   npm run dev
   ```

2. Run verification script:
   ```bash
   node verify-redesign.mjs
   ```

3. Expected output:
   ```
   26 nodes total (vs 18 in old system)
   8 different node types
   0 eighth notes in Units 1-3
   2 review nodes
   3 boss nodes
   ```

4. Run `npm run lint` to verify no code errors in committed files.

If verification fails, document the error and investigate before proceeding to manual tests.
  </action>
  <verify>
Verification script outputs expected values.
`npm run lint` passes without errors.
  </verify>
  <done>Pre-test verification passes: 26 nodes load, no eighth notes in Units 1-3, no lint errors.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Execute manual test cases from TEST_PLAN.md</name>
  <what-built>
Trail redesign with 26 nodes, Memory Game integration, and multi-exercise navigation. Code is committed but not yet validated through manual testing.
  </what-built>
  <how-to-verify>
Execute the following tests from TEST_PLAN.md. Keep browser console (F12) open throughout.

**Pre-test setup:**
1. Ensure dev server running on http://localhost:5174
2. Login with a student account
3. Open browser console (F12)
4. Clear console for clean start

**Test 2: Trail Map Access**
1. Navigate to `/trail`
2. Verify: Trail map loads without errors
3. Verify: 26 nodes visible (Units 1-3)
4. Check console: No red errors
PASS/FAIL: ___

**Test 3: Memory Game - Node "Note Pairs" (treble_1_4)**
1. Find node `treble_1_4` "Note Pairs" in Unit 1
2. Click node to open modal
3. Verify modal shows "Note Pairs" with Memory Game exercise type
4. Click "Start Practice"
5. Verify: Loading screen appears briefly
6. Verify: Game auto-starts (no settings modal)
7. Verify: Only C4 and D4 cards appear (2x4 grid = 8 cards)
8. Complete the game (match all pairs)
9. Verify: Victory screen shows stars and XP
10. Click "Back to Trail"
11. Verify: Node shows earned stars
PASS/FAIL: ___

**Test 5: Multi-Exercise Node Navigation**
1. Find a boss node with multiple exercises (e.g., `boss_treble_1`)
2. Start the node
3. Complete first exercise
4. Verify: "Next Exercise (X left)" button appears
5. Click to navigate to next exercise
6. Verify: Navigation works, new exercise loads
PASS/FAIL: ___

**Test 6: Progress Persistence**
1. Note stars on completed node
2. Refresh the page
3. Verify: Stars still visible after refresh
PASS/FAIL: ___

**Test 8: Console Error Check**
1. During all tests, note any red errors in console
2. List any errors found: ___
PASS/FAIL: ___

**Quick Checklist (run through rapidly):**
- [ ] Trail map loads without errors
- [ ] Can open memory game node modal
- [ ] "Start Practice" navigates to memory game
- [ ] Loading screen appears briefly
- [ ] Game auto-starts with correct notes
- [ ] Cards flip and match correctly
- [ ] Victory screen appears after completion
- [ ] Stars and XP awarded
- [ ] "Back to Trail" returns to trail map
- [ ] Progress saved (stars visible on node)
- [ ] No console errors
  </how-to-verify>
  <resume-signal>
Report results:
- "all pass" if all tests pass
- Or describe specific failures with:
  - Test number that failed
  - What you did
  - What happened (actual behavior)
  - What you expected
  - Console errors (if any)
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Fix discovered bugs (if any)</name>
  <files>TBD based on test results</files>
  <action>
For each bug discovered during testing:

1. Analyze the error:
   - Review console error message
   - Identify affected file(s)
   - Understand root cause

2. Implement fix:
   - Make minimal change to fix the specific issue
   - Do NOT refactor or add features

3. Create fix commit:
   ```bash
   git add [affected-files]
   git commit -m "$(cat <<'EOF'
   fix(trail): [brief description of fix]

   [What was wrong]
   [What the fix does]

   Closes: [test case that was failing]

   Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
   EOF
   )"
   ```

4. Re-test the specific test case that failed

5. Repeat for each discovered bug

If no bugs discovered, skip this task and document "No bugs found during testing."
  </action>
  <verify>
All previously failing test cases now pass.
Each bug fix has its own commit with clear description.
  </verify>
  <done>All bugs fixed (or "No bugs found"). All 10 test cases from TEST_PLAN.md pass.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. All 10 TEST_PLAN.md test cases pass
2. No red console errors during normal flow
3. Any bug fixes committed with separate commits
4. Run `npm run build` - production build succeeds
</verification>

<success_criteria>
- Pre-test verification passes (26 nodes, no eighth notes)
- All manual test cases pass
- No console errors during testing
- Any discovered bugs fixed with separate commits
- Requirements covered: TRAIL-03, TRAIL-04, MEM-01, MEM-02, MEM-03, MEM-04, MEM-05, NAV-01, NAV-02, NAV-03, NAV-04
</success_criteria>

<output>
After completion, create `.planning/phases/06-trail-stabilization/06-02-SUMMARY.md`
</output>
