# Roadmap: PianoApp

## Milestones

- SHIPPED **v1.0 Security Hardening** - Phases 1-4 (shipped 2026-02-01)
- SHIPPED **v1.1 Parental Consent Email Service** - Phase 5 (shipped 2026-02-02)
- SHIPPED **v1.2 Trail System Stabilization** - Phases 6-7 (shipped 2026-02-03)
- SHIPPED **v1.3 Trail System Redesign** - Phases 8-12 (shipped 2026-02-05)
- SHIPPED **v1.4 UI Polish & Celebrations** - Phases 13-18 (shipped 2026-02-09)
- SHIPPED **v1.5 Trail Page Visual Redesign** - Phases 19-22 (shipped 2026-02-11)

See `.planning/milestones/` for archived details of each milestone.

## Phases

<details>
<summary>✅ v1.0 Security Hardening (Phases 1-4) - SHIPPED 2026-02-01</summary>

### Phase 1: Authorization Hardening
**Goal**: All database operations verify user authorization
**Plans**: 4/4 complete

### Phase 2: COPPA Compliance Foundation
**Goal**: Children's data protection mechanisms in place
**Plans**: 4/4 complete

### Phase 3: Production Safeguards
**Goal**: Rate limiting and session management prevent abuse
**Plans**: 4/4 complete

### Phase 4: Privacy Foundation
**Goal**: Parental consent blocks data collection, anonymization in shared features
**Plans**: 3/3 complete

</details>

<details>
<summary>✅ v1.1 Parental Consent Email Service (Phase 5) - SHIPPED 2026-02-02</summary>

### Phase 5: Consent Email Service
**Goal**: Parents receive consent verification email with working activation flow
**Plans**: 2/2 complete

</details>

<details>
<summary>✅ v1.2 Trail System Stabilization (Phases 6-7) - SHIPPED 2026-02-03</summary>

### Phase 6: Trail Commitment
**Goal**: 26 treble nodes with memory game integration
**Plans**: 2/2 complete

### Phase 7: Tech Debt Cleanup
**Goal**: Documentation gaps closed, temp files removed
**Plans**: 2/2 complete

</details>

<details>
<summary>✅ v1.3 Trail System Redesign (Phases 8-12) - SHIPPED 2026-02-05</summary>

### Phase 8: Validation Infrastructure
**Goal**: Build-time validation catches node definition errors
**Plans**: 3/3 complete

### Phase 9: Bass Clef Redesign
**Goal**: 22 bass nodes following treble pedagogy
**Plans**: 3/3 complete

### Phase 10: Rhythm Redesign
**Goal**: 36 rhythm nodes with duration-based progression
**Plans**: 4/4 complete

### Phase 11: Trail System Integration
**Goal**: 93-node trail operational with atomic cutover
**Plans**: 3/3 complete

### Phase 12: E2E Verification
**Goal**: All node types navigable, all games playable
**Plans**: 1/1 complete

</details>

<details>
<summary>✅ v1.4 UI Polish & Celebrations (Phases 13-18) - SHIPPED 2026-02-09</summary>

### Phase 13: Celebration Foundation & Accessibility
**Goal**: Tiered celebration framework with accessibility controls
**Plans**: 2/2 complete

### Phase 14: Node Type Visual Distinction
**Goal**: 8 node types visually distinct with colorblind-safe icons
**Plans**: 2/2 complete

### Phase 15: VictoryScreen Celebration System
**Goal**: Dynamic celebrations based on performance and node type
**Plans**: 3/3 complete

### Phase 16: Dashboard XP Prominence
**Goal**: XP progress visible with level-up celebrations
**Plans**: 2/2 complete

### Phase 17: Boss Unlock Celebrations
**Goal**: 3-stage boss unlock modal with musical fanfare
**Plans**: 2/2 complete

### Phase 18: Code Cleanup
**Goal**: Dead code removed, bundle size optimized
**Plans**: 2/2 complete

</details>

---

## v1.5 Trail Page Visual Redesign (Shipped 2026-02-11)

**Milestone Goal:** Transform trail page into immersive enchanted forest experience with 3D glowing nodes, responsive zigzag/horizontal layouts, tab-based navigation, and glass-morphism styling. Zero database changes. Pure UI redesign maintaining all existing functionality.

### Phase 19: CSS Foundation & Font Setup
**Goal**: Enchanted forest visual foundation established with accessibility-first CSS patterns
**Depends on**: Phase 18
**Requirements**: CSS-01 (a-d), CSS-02 (a-d), FONT-01 (a-c), A11Y-01a, PERF-01 (b-c)
**Success Criteria** (what must be TRUE):
  1. Trail page displays enchanted forest background with multi-layer gradients (deep purple/navy with ambient glow orbs)
  2. CSS animations respect reducedMotion setting (both AccessibilityContext and prefers-reduced-motion media query)
  3. Quicksand font loads without blocking render (font-display: swap)
  4. Trail-scoped CSS module (trail-effects.css) provides reusable utility classes for 3D nodes, glass panels, and glow effects
  5. Backdrop-filter usage limited to max 3 elements (performance constraint for Chromebooks)
**Plans**: 2 plans

Plans:
- [x] 19-01-PLAN.md — Install Quicksand font, extend Tailwind config, create trail-effects.css module
- [x] 19-02-PLAN.md — Apply enchanted forest background to TrailMapPage with starfield and glow orbs

---

### Phase 20: Component Integration & Tab Navigation
**Goal**: Visual enhancements applied to nodes and header, tab-based path switching functional
**Depends on**: Phase 19
**Requirements**: NODE-01 (a-g), NODE-02 (a-d), TAB-01 (a-e), HEADER-01 (a-d), COMPAT-01 (a-b)
**Success Criteria** (what must be TRUE):
  1. Trail nodes display 3D depth effects (radial gradients, layered box-shadows, glow rings for active nodes)
  2. Node states visually distinct (active=cyan glow, locked=dark purple, completed=green with stars)
  3. Tab switcher shows Treble/Bass/Rhythm buttons with only one path visible at a time
  4. Active tab persists in URL query param (?path=treble) and supports browser back button
  5. Trail header displays level badge, "Learning Trail" title with Quicksand font, and "Free Practice" button
  6. Node press animation provides tactile feedback (translateY with reduced shadow on :active)
  7. TrailNodeModal functionality unchanged (click node → details → start practice flow works identically)
**Plans**: 3/3 complete

Plans:
- [x] 20-01-PLAN.md — 3D node styling, star overlays, locked tooltips, press animation
- [x] 20-02-PLAN.md — Tab switcher with URL persistence, ARIA tablist, boss node integration
- [x] 20-03-PLAN.md — Trail header with shield level badge, XP bar, navigation

---

### Phase 21: Responsive Layout Rewrite
**Goal**: Mobile vertical zigzag and desktop horizontal layouts with animated SVG path connectors
**Depends on**: Phase 20
**Requirements**: LAYOUT-01 (a-f), LAYOUT-02 (a-c), PATH-01 (a-c), GLASS-01 (a-d), PERF-01a
**Success Criteria** (what must be TRUE):
  1. Mobile (<768px) displays vertical zigzag trail with nodes alternating left/right (25%/75% horizontal positions)
  2. Desktop (>=768px) displays horizontal wavy trail with enhanced node styling from Phase 20
  3. SVG path connectors render smooth S-curves between zigzag nodes using Bezier calculations
  4. Completed path sections glow cyan (stroke: #00FFFF with drop-shadow filter), locked sections use dashed gray stroke
  5. Only visible path connectors animate (Intersection Observer limits to viewport for 60fps on Chromebooks)
  6. Unit progress cards display as glass-morphism panels with unit name, completion count, and star rating
  7. Glass panels meet WCAG 4.5:1 contrast ratio with semi-opaque overlay for text readability
  8. Trail scrolling maintains 60fps on Intel Celeron Chromebook (target device validation)
**Plans**: 3 plans

Plans:
- [x] 21-01-PLAN.md — Shared primitives: PathConnector S-curve rewrite, useVisibleNodes hook, UnitProgressCard glass component
- [x] 21-02-PLAN.md — Mobile ZigzagTrailLayout and desktop HorizontalTrailLayout components
- [x] 21-03-PLAN.md — TrailMap responsive wiring, auto-scroll, and visual verification

---

### Phase 22: Performance Optimization & Deployment
**Goal**: Production-ready trail page meeting performance and accessibility standards
**Depends on**: Phase 21
**Requirements**: PERF-01d, A11Y-01 (b-d), COMPAT-01 (c-d)
**Success Criteria** (what must be TRUE):
  1. Service worker cache version bumped to pianomaster-v4 (old caches deleted on activate)
  2. Trail page meets WCAG 2.2 AA standards (48dp tap targets, color not sole indicator, keyboard navigation)
  3. All interactive elements (nodes, tabs, buttons) have minimum 48x48dp touch targets
  4. Trail page maintains 60fps during scrolling and node interactions on test devices (Chromebook, iPad 6th gen)
  5. Trail -> game -> VictoryScreen -> trail navigation flow works identically to pre-redesign
  6. RTL support maintained for Hebrew users (trail direction respects locale)
  7. All 93 existing nodes display correctly with preserved progress data
**Plans**: 2 plans

Plans:
- [x] 22-01-PLAN.md — Accessibility fixes, RTL support, service worker cache bump, focus indicators
- [x] 22-02-PLAN.md — Automated verification + human verification checkpoint for production readiness

---

## Progress

**Execution Order:**
Phases execute in numeric order: 1 → 2 → ... → 18 → 19 → 20 → 21 → 22

| Phase | Milestone | Plans Complete | Status | Completed |
|-------|-----------|----------------|--------|-----------|
| 1. Authorization Hardening | v1.0 | 4/4 | Complete | 2026-02-01 |
| 2. COPPA Compliance Foundation | v1.0 | 4/4 | Complete | 2026-02-01 |
| 3. Production Safeguards | v1.0 | 4/4 | Complete | 2026-02-01 |
| 4. Privacy Foundation | v1.0 | 3/3 | Complete | 2026-02-01 |
| 5. Consent Email Service | v1.1 | 2/2 | Complete | 2026-02-02 |
| 6. Trail Commitment | v1.2 | 2/2 | Complete | 2026-02-03 |
| 7. Tech Debt Cleanup | v1.2 | 2/2 | Complete | 2026-02-03 |
| 8. Validation Infrastructure | v1.3 | 3/3 | Complete | 2026-02-05 |
| 9. Bass Clef Redesign | v1.3 | 3/3 | Complete | 2026-02-05 |
| 10. Rhythm Redesign | v1.3 | 4/4 | Complete | 2026-02-05 |
| 11. Trail System Integration | v1.3 | 3/3 | Complete | 2026-02-05 |
| 12. E2E Verification | v1.3 | 1/1 | Complete | 2026-02-05 |
| 13. Celebration Foundation & Accessibility | v1.4 | 2/2 | Complete | 2026-02-05 |
| 14. Node Type Visual Distinction | v1.4 | 2/2 | Complete | 2026-02-08 |
| 15. VictoryScreen Celebration System | v1.4 | 3/3 | Complete | 2026-02-09 |
| 16. Dashboard XP Prominence | v1.4 | 2/2 | Complete | 2026-02-09 |
| 17. Boss Unlock Celebrations | v1.4 | 2/2 | Complete | 2026-02-09 |
| 18. Code Cleanup | v1.4 | 2/2 | Complete | 2026-02-09 |
| 19. CSS Foundation & Font Setup | v1.5 | 2/2 | Complete | 2026-02-10 |
| 20. Component Integration & Tab Navigation | v1.5 | 3/3 | Complete | 2026-02-10 |
| 21. Responsive Layout Rewrite | v1.5 | 3/3 | Complete | 2026-02-11 |
| 22. Performance Optimization & Deployment | v1.5 | 2/2 | Complete | 2026-02-11 |

**Total: 22 phases, 61 plans across 6 milestones (6 shipped)**

---
*Last updated: 2026-02-11 — Phase 22 complete, v1.5 milestone shipped*
