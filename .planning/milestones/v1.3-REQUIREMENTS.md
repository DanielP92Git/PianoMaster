# Requirements Archive: v1.3 Trail System Redesign

**Archived:** 2026-02-05
**Status:** SHIPPED

This is the archived requirements specification for v1.3.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: PianoApp v1.3 Trail System Redesign

**Defined:** 2026-02-03
**Core Value:** Professional game-like learning progression for 8-year-olds with consistent pedagogy across all paths

## v1.3 Requirements

Requirements for trail system redesign. Each maps to roadmap phases.

### Data Layer Cleanup

- [x] **DATA-01**: Remove LEGACY_NODES array from skillTrail.js (eliminate duplicates) — Phase 12
- [x] **DATA-02**: Remove nodeGenerator.js dependency for bass/rhythm main paths — Phase 12
- [x] **DATA-03**: Create build-time validation script for trail nodes (prerequisite chains, node type validity) — Phase 8
- [x] **DATA-04**: Single expandedNodes.js import combining all unit files — Phase 11

### Bass Clef Unit 1: First Steps (C4, B3, A3)

- [x] **BASS1-01**: Discovery node for C4 (Middle C in bass clef) — Phase 9
- [x] **BASS1-02**: Discovery node for B3 (introduce second note) — Phase 9
- [x] **BASS1-03**: Practice node for C4-B3 (sight reading) — Phase 9
- [x] **BASS1-04**: Mix-Up node (memory game with C4-B3) — Phase 9
- [x] **BASS1-05**: Discovery node for A3 (third note) — Phase 9
- [x] **BASS1-06**: Practice node for C4-B3-A3 (three note songs) — Phase 9
- [x] **BASS1-07**: Speed Round node (timed note recognition) — Phase 9
- [x] **BASS1-08**: Mini-Boss node (unit completion challenge) — Phase 9

### Bass Clef Unit 2: Five Finger Low (G3, F3)

- [x] **BASS2-01**: Review node for Unit 1 (spaced repetition) — Phase 9
- [x] **BASS2-02**: Discovery node for G3 (fourth note) — Phase 9
- [x] **BASS2-03**: Practice node for C4-A3-G3 range — Phase 9
- [x] **BASS2-04**: Discovery node for F3 (five-finger complete) — Phase 9
- [x] **BASS2-05**: Mix-Up node (memory game with all 5 notes) — Phase 9
- [x] **BASS2-06**: Practice node for five-finger bass songs — Phase 9
- [x] **BASS2-07**: Challenge node (interleaving Units 1+2) — Phase 9
- [x] **BASS2-08**: Mini-Boss node (five-finger mastery) — Phase 9

### Bass Clef Unit 3: Full Octave (E3, D3, C3)

- [x] **BASS3-01**: Review node for Unit 2 (spaced repetition) — Phase 9
- [x] **BASS3-02**: Discovery node for E3 — Phase 9
- [x] **BASS3-03**: Practice node for F3-E3 range — Phase 9
- [x] **BASS3-04**: Discovery node for D3 — Phase 9
- [x] **BASS3-05**: Practice node for E3-D3 range — Phase 9
- [x] **BASS3-06**: Discovery node for C3 (octave complete!) — Phase 9
- [x] **BASS3-07**: Practice node for full octave songs — Phase 9
- [x] **BASS3-08**: Mix-Up node (memory game with all 8 notes) — Phase 9
- [x] **BASS3-09**: Speed Round node (timed full octave) — Phase 9
- [x] **BASS3-10**: Boss node (bass octave mastery, unlocks next section) — Phase 9

### Rhythm Unit 1: Basic Beats (Whole, Half, Quarter)

- [x] **RHY1-01**: Discovery node for Quarter notes (steady beat) — Phase 10
- [x] **RHY1-02**: Practice node for Quarter notes — Phase 10
- [x] **RHY1-03**: Discovery node for Half notes (2 beats) — Phase 10
- [x] **RHY1-04**: Practice node for Quarter + Half — Phase 10
- [x] **RHY1-05**: Discovery node for Whole notes (4 beats) — Phase 10
- [x] **RHY1-06**: Practice node for all three durations — Phase 10
- [x] **RHY1-07**: Speed Round node (rhythm recognition) — Phase 10
- [x] **RHY1-08**: Mini-Boss node (basic rhythm mastery) — Phase 10

### Rhythm Unit 2: Dotted Half Notes

- [x] **RHY2-01**: Review node for Unit 1 — Phase 10
- [x] **RHY2-02**: Discovery node for Dotted Half (3 beats concept) — Phase 10
- [x] **RHY2-03**: Practice node for Dotted Half patterns — Phase 10
- [x] **RHY2-04**: Mix-Up node (rhythm memory game) — Phase 10
- [x] **RHY2-05**: Practice node combining all learned rhythms — Phase 10
- [x] **RHY2-06**: Mini-Boss node (dotted half mastery) — Phase 10

### Rhythm Unit 3: Eighth Notes

- [x] **RHY3-01**: Review node for Unit 2 — Phase 10
- [x] **RHY3-02**: Discovery node for Eighth notes (half-beat) — Phase 10
- [x] **RHY3-03**: Practice node for Eighth note pairs — Phase 10
- [x] **RHY3-04**: Practice node for Eighth + Quarter combinations — Phase 10
- [x] **RHY3-05**: Mix-Up node (rhythm variety game) — Phase 10
- [x] **RHY3-06**: Speed Round node (eighth note patterns) — Phase 10
- [x] **RHY3-07**: Mini-Boss node (eighth note mastery) — Phase 10

### Rhythm Unit 4: Dotted Quarter Notes

- [x] **RHY4-01**: Review node for Unit 3 — Phase 10
- [x] **RHY4-02**: Discovery node for Dotted Quarter (1.5 beats) — Phase 10
- [x] **RHY4-03**: Practice node for Dotted Quarter + Eighth patterns — Phase 10
- [x] **RHY4-04**: Practice node combining all rhythms — Phase 10
- [x] **RHY4-05**: Challenge node (syncopation introduction) — Phase 10
- [x] **RHY4-06**: Mini-Boss node (dotted quarter mastery) — Phase 10

### Rhythm Unit 5: Sixteenth Notes

- [x] **RHY5-01**: Review node for Unit 4 — Phase 10
- [x] **RHY5-02**: Discovery node for Sixteenth notes (quarter-beat) — Phase 10
- [x] **RHY5-03**: Practice node for Sixteenth note groups — Phase 10
- [x] **RHY5-04**: Practice node for Sixteenth + Eighth combinations — Phase 10
- [x] **RHY5-05**: Mix-Up node (advanced rhythm game) — Phase 10
- [x] **RHY5-06**: Speed Round node (fast rhythm patterns) — Phase 10
- [x] **RHY5-07**: Challenge node (all rhythms combined) — Phase 10
- [x] **RHY5-08**: Boss node (rhythm master, unlocks advanced content) — Phase 10

### Integration & Validation

- [x] **INT-01**: Atomic cutover in expandedNodes.js (all new files at once) — Phase 11
- [x] **INT-02**: Preserve existing node IDs for bass/rhythm Units 1-2 (user progress) — Phase 11
- [x] **INT-03**: XP economy audit (maintain parity with old trail) — Phase 11
- [x] **INT-04**: Database trigger compatibility verification — Phase 11
- [x] **INT-05**: Test with production data snapshot (progress preservation) — Phase 12

## Future Requirements (v1.4+)

Deferred to future release. Tracked but not in current roadmap.

### UI Enhancements

- **UI-01**: VictoryScreen node-type-specific celebrations
- **UI-02**: Unlock Event Modal after Boss completion
- **UI-03**: Node type icons and colors in TrailNode.jsx
- **UI-04**: "What's New" badges in TrailNodeModal.jsx
- **UI-05**: Three-column trail map layout for parallel paths

### Extended Content

- **EXT-01**: Bass Unit 4+ (ledger lines, extended range)
- **EXT-02**: Treble Unit 4+ (eighth notes, extended range)
- **EXT-03**: REVIEW node type for automated spaced repetition
- **EXT-04**: Song/Applied Practice nodes with real music excerpts

### Production

- **PROD-01**: Hard delete Edge Function for accounts past 30-day grace period
- **PROD-02**: Production deployment to Google Play / Apple App Store
- **PROD-03**: Beta testing with human verification checklist

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Trail map UI redesign | Focus on data layer first; UI works with any node structure |
| Grand Staff integration | Complex cross-clef learning; defer to future |
| Adaptive difficulty system | Requires algorithm research; start with fixed difficulty |
| Real song integration | Licensing complexity; use generated patterns for now |
| Path branching logic | Current linear progression works; complexity not justified |
| REVIEW node automation | Manual review nodes for now; spaced repetition algorithm later |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| DATA-01 | Phase 12 | Complete |
| DATA-02 | Phase 12 | Complete |
| DATA-03 | Phase 8 | Complete |
| DATA-04 | Phase 11 | Complete |
| BASS1-01 to BASS1-08 | Phase 9 | Complete |
| BASS2-01 to BASS2-08 | Phase 9 | Complete |
| BASS3-01 to BASS3-10 | Phase 9 | Complete |
| RHY1-01 to RHY1-08 | Phase 10 | Complete |
| RHY2-01 to RHY2-06 | Phase 10 | Complete |
| RHY3-01 to RHY3-07 | Phase 10 | Complete |
| RHY4-01 to RHY4-06 | Phase 10 | Complete |
| RHY5-01 to RHY5-08 | Phase 10 | Complete |
| INT-01 to INT-05 | Phase 11-12 | Complete |

**Coverage:**
- v1.3 requirements: 70 total (4 data + 26 bass + 35 rhythm + 5 integration)
- All 70 requirements: Complete

---

## Milestone Summary

**Shipped:** 70 of 70 v1.3 requirements
**Adjusted:** None - all requirements delivered as specified
**Dropped:** None

---
*Archived: 2026-02-05 as part of v1.3 milestone completion*
